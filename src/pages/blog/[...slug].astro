---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import BlogPostLayout from '../../layouts/BlogPostLayout.astro';
import { getBlogPath } from '../../utils/params.ts';

export async function getStaticPaths() {
    const posts = await getCollection('blog');
    return posts.map((post: CollectionEntry<'blog'>) => ({
        params: { slug: getBlogPath(post, false) },
        props: { post },
    }));
}

const { post } = Astro.props as { post: CollectionEntry<'blog'> };
const { Content, headings } = await post.render();
---
<BlogPostLayout frontmatter={post.data} headings={headings || []}>
    <Content />
</BlogPostLayout>
